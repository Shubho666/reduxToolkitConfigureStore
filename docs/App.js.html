<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: App.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: App.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// import logo from './logo.svg';
// import {html_to_pdf} from 'html-pdf-node';
import './App.css';
import {useSelector, useDispatch} from 'react-redux';
// import {increment,decrement,logIn} from './actions';
// import * as allactions from './actions';

import * as allSliceActions from './slices';
import { Outlet, Link } from "react-router-dom";
import HtmlComponent from './components/htmlcomponent';
import html2canvas from 'html2canvas';
import jsPDF from 'jspdf';
import { useState } from 'react';
// import SomeComponent from './SomeComponent';

// import {increment,decrement} from './slices/counterSlice';
// import {signin} from './slices/isLoggedSlice';

let options = { format: 'A4' };
let file = [{ url: "https://example.com", name: 'example.pdf' }];

// html_to_pdf.generatePdfs(file, options).then(output => {
//   console.log("PDF Buffer:-", output); // PDF Buffer:- [{url: "https://example.com", name: "example.pdf", buffer: &lt;PDF buffer>}]
// });

function App() {

  /**
   * @typedef {Object} ReferenceState
   */
  /**
   * @callback ReferenceStateSetter
   * @param {ReferenceState} state
   * @return {void}
   */
  /**
   * @namespace{Object}
   * @property {ReferenceState} 0
   * @property {ReferenceStateSetter} 1
   */
  const [mmm,setmmm] = useState(false)

  /**
   * @function counter
   * use selector to get counter value
   * @param {object} state - the store state
   * 
   */
  const counter = useSelector(state => state.counter.value);

/**
 * @typedef {Object} Storestate
 */

  const isLogged = useSelector(state => state.isLogged.value);
  const dispatch = useDispatch();


  /**
   * @function pdfdownload
   * @description
   * pdfdownload to do something test document
   */
  const pdfdownload = () => {
    const input = document.getElementById('capture');
    const divHeight = input.clientHeight
    const divWidth = input.clientWidth
    let ratio = divHeight / divWidth;

    let allheights = [input.clientHeight]; let allwidth = [input.clientWidth];
    let allratios =  [input.clientHeight/input.clientWidth]
    let ratioofchoice = allheights[0]/allwidth[0]; let maxwidth = allwidth[0];
    allDescendants(input);
    function allDescendants (node) {
      for (var i = 0; i &lt; node.childNodes.length; i++) {
        var child = node.childNodes[i];
        allDescendants(child);
        if(child.clientHeight !== undefined){
          allheights.push(child.clientHeight);
        }
        if(child.clientWidth !== undefined) {
          allwidth.push(child.clientWidth);

        }
        if(child.clientHeight !== undefined &amp;&amp; child.clientWidth !== undefined) {
          allratios.push(child.clientHeight/child.clientWidth)

          if(child.clientWidth > maxwidth){
            maxwidth = child.clientWidth;
            ratioofchoice = child.clientHeight/child.clientWidth
          }
        }
      }
  }
  console.log(allheights);
  console.log(allwidth);
  ratio = Math.min(...allratios);
  ratio = Math.max(...allheights)/Math.max(...allwidth);
  ratio = ratioofchoice;
  console.log(ratio);
  
    html2canvas(input, { scale: '1'}).then((canvas) => {
      const imgData = canvas.toDataURL('image/jpeg');
      const pdfDOC = new jsPDF("l", "mm", "a0"); //  use a4 for smaller page
  
      const width = pdfDOC.internal.pageSize.getWidth();
      let height = pdfDOC.internal.pageSize.getHeight();
      console.log('height',height);
       height = ratio * width;

      console.log('width',width);  
      pdfDOC.addImage(imgData, 'JPEG', 0, 0, width - 20, height - 10);
      pdfDOC.save('summary.pdf');   //Download the rendered PDF.
    })
//     var body = document.body,
// html = document.getElementById('capture');
// var height = Math.max(body.scrollHeight, body.offsetHeight,
//              html.clientHeight, html.scrollHeight, html.offsetHeight);
//              document.body.style.height = `${height}px`
// html2canvas(document.body).then(function (canvas) {
//                 var imgData = canvas.toDataURL('image/pdf')
//                 var doc = new jsPDF('p', 'mm', [canvas.width, canvas.height])
//                 doc.addImage(imgData, 'PDF', 10, 10, canvas.width, canvas.height)
//                 doc.save('name-of-pdf.pdf')
//   })
  };
  return (
    &lt;div className="App">
      &lt;HtmlComponent/>
      &lt;h1>Counter {counter}&lt;/h1>
      &lt;button onClick={() => dispatch(allSliceActions.increment(5))}>+&lt;/button>
      &lt;button onClick={() => dispatch(allSliceActions.decrement())}>-&lt;/button>
      &lt;button onClick={() => dispatch(allSliceActions.incrementAsync(3))}>+Async&lt;/button>
      
      &lt;button onClick={() => dispatch(allSliceActions.reset())}>reset&lt;/button>
      {isLogged ? &lt;h3>valuable info i shouldnt see&lt;/h3> : ""}
      &lt;button onClick={() => dispatch(allSliceActions.togglesignin())}>Log {isLogged ? "Out" : "In"}&lt;/button>
      &lt;button onClick={pdfdownload}>pdf download&lt;/button>
      {/* http://localhost:3000/ */}
      &lt;br/>
      {/* &lt;iframe src="http://localhost:3000/index.html" height="800px" width="100%" title="Iframe Example">&lt;/iframe> */}
      {/* &lt;SomeComponent /> */}
      &lt;Link to="/ex">Invoices&lt;/Link>
    &lt;/div>
    
  );
}

export default App;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#counteruseselectortogetcountervalue">counter
use selector to get counter value</a></li><li><a href="global.html#isLoggedSlice">isLoggedSlice</a></li><li><a href="global.html#pdfdownload">pdfdownload</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Wed Sep 28 2022 23:46:53 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
